parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"15ap":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EventEmitter=void 0;const e=Symbol("LISTENERS"),t=t=>{const r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){const r=Object.create(null);return Object.defineProperty(t,e,{value:r,configurable:!1,enumerable:!1,writable:!1}),r}return r.value},r=(e,r)=>{const o=t(e);return r in o?o[r]:o[r]=[]};class o{addEventListener(e,t){r(this,e).push(t)}on(e,t){}addListener(e,t){}subscribe(e,t){}once(e,t){const r=o=>{this.removeEventListener(e,r),t(o)};this.addEventListener(e,r)}waitFor(e){return new Promise(t=>this.once(e,t))}emit(e,t){const o=r(this,e);for(const r of o.slice())r.call(this,t)}dispatch(e,t){}push(e,t){}publish(e,t){}removeEventListener(e,t){const o=r(this,e),s=o.indexOf(t);return-1!=s&&(o.splice(s,1),!0)}off(e,t){return!1}removeListener(e,t){return!1}unsubscribe(e,t){return!1}}exports.EventEmitter=o,o.prototype.on=o.prototype.addEventListener,o.prototype.addListener=o.prototype.addEventListener,o.prototype.subscribe=o.prototype.addEventListener,o.prototype.dispatch=o.prototype.emit,o.prototype.push=o.prototype.dispatch,o.prototype.publish=o.prototype.dispatch,o.prototype.off=o.prototype.removeEventListener,o.prototype.removeListener=o.prototype.removeEventListener,o.prototype.unsubscribe=o.prototype.removeEventListener;
},{}],"SbX1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});
},{}],"9p2c":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeEventEmitter=void 0;const e=require("./event-emitter"),t=Object.getOwnPropertyDescriptors(e.EventEmitter.prototype);function r(e){const r=e.prototype,o=Object.getOwnPropertyDescriptors(r);for(const n in t)if(n in o)throw new Error(String(n)+" was already present in the prototype of the target");Object.defineProperties(r,t)}delete t.constructor,exports.makeEventEmitter=r;
},{"./event-emitter":"15ap"}],"BaXx":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),t=this&&this.__exportStar||function(t,r){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(r,i)||e(r,t,i)};Object.defineProperty(exports,"__esModule",{value:!0}),t(require("./event-emitter"),exports),t(require("./event-emitter-int"),exports),t(require("./make-event-emitter"),exports);
},{"./event-emitter":"15ap","./event-emitter-int":"SbX1","./make-event-emitter":"9p2c"}],"eZzv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fitSystemNewApproach=exports.fitSystemFixed=exports.fitSystem=void 0;const t=(t,e)=>Math.sqrt((e[0]-t[0])**2+(e[1]-t[1])**2);function e(e,s,n,r,o){const c=t(s,r)/t(e,n),i=[(n[0]-e[0])*c,(n[1]-e[1])*c],p=(r[1]-s[1]+(r[0]-s[0])*i[1]/i[0])*i[0]/(i[0]*i[0]-i[1]*i[1]),u=Math.cos(Math.asin(p));return o.map(([t,s])=>{const n=[t-e[0],s-e[1]],r=[u*c*n[0]-p*c*n[1],p*c*n[0]+u*c*n[1]];return[e[0]+r[0],e[1]+r[1]]})}function s(t,e,s,n,r){const o=t[0],c=t[1],i=s[0],p=s[1],u=e[0],f=e[1],a=n[0],h=n[1],l=(a-u*i/o)*o/(i*-c+p*o),x=(h-f*i/o)*o/(i*-c+p*o),m=(u-l*c)/o,y=(f-x*c)/o;return r.map(([t,e])=>[t*m+e*l,t*y+e*x])}exports.fitSystem=e,exports.fitSystemFixed=s;const n=(t,e=1)=>{const s=Math.sqrt(t[0]*t[0]+t[1]*t[1]);return[e*t[0]/s,e*t[1]/s]},r=t=>[t[1],-t[0]],o=t=>[-t[1],t[0]],c=(t,e)=>[e[0]-t[0],e[1]-t[1]],i=(t,e)=>[t[0]+e[0],t[1]+e[1]],p=(t,e,s=1e-8)=>Math.abs(t-e)<s,u=(t,e)=>{const s=n(t,1),r=n(e,1);return p(s[0],r[0])&&p(s[1],r[1])||p(s[0],-r[0])&&p(s[1],-r[1])},f=(t,e)=>[t[0]*e,t[1]*e],a=(t,e,s,n)=>{if(u(e,n))return"parallel-or-identical";if(0==e[1]){const r=t;t=s,s=r;const o=e;e=n,n=o}const r=t[0],o=t[1],c=t[0]+e[0],i=t[1]+e[1],p=o-i,f=c-r,a=r*i-c*o,h=s[0],l=s[1],x=s[0]+n[0],m=s[1]+n[1],y=l-m,d=(y*a-(h*m-x*l)*p)/(p*(x-h)-y*f);return[(-a-f*d)/p,d]};function h(t,e,s){const p="left"==e?r:o,u="left"==e?o:r,f=[];{const e=c(t[0],t[1]),r=p(n(e,s));f.push(i(t[0],r))}for(let r=1;r<t.length-1;r++){const e=c(t[r-1],t[r]),o=i(t[r-1],n(p(e),s)),h=c(t[r+1],t[r]),l=i(t[r+1],n(u(h),s)),x=a(o,e,l,h);"string"==typeof x?f.push(i(t[r],n(p(e),s))):f.push(x)}{const e=c(t[t.length-2],t[t.length-1]),r=p(n(e,s));f.push(i(t[t.length-1],r))}return f}exports.fitSystemNewApproach=h;
},{}],"GSY4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bc=exports.factorial=void 0,exports.factorial=function(){const t=[1,1,2,6,24,120,720,5040,40320,362880,3628800,39916800,479001600,6227020800,87178291200,1307674368e3,20922789888e3,355687428096e3,6402373705728e3];return function(e){return t[e]}}(),exports.bc=function(){const t=[];for(let e=0;e<=15;e++){t[e]=[];for(let r=0;r<=Math.ceil(e/2);r++)t[e][r]=exports.factorial(e)/(exports.factorial(r)*exports.factorial(e-r))}return function(e,r){return r>e/2&&(r=e-r),0==r?1:1==r?e:t[e][r]}}();
},{}],"hx9J":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Cache=void 0;const e=e=>JSON.stringify(e);class t{constructor(t=e){this.keyGenerator=t,this.backing=new Map}get(e){return this.backing.get(this.keyGenerator(e))}set(e,t){return this.backing.set(this.keyGenerator(e),t)}}exports.Cache=t;
},{}],"bHmz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.produceGenericOffsetAt=exports.produceGenericDerived=exports.produceGenericAt=exports.assembleBezierFunction=exports.ID_POINTS=exports.ID_DISTANCE=exports.ID_ONE_MINUS_T=exports.ID_T=void 0;const e=require("./math-functions"),t=require("./cache");function n(e,t){if(0==t)return"1";let n="";const r=t<0?-t:t;for(let o=0;o<r;o++)n+=e,o<t-1&&(n+=" * ");return t<0&&(n="1 / ("+e+")"),n}function r(e,t,r){let o="";return 0!=e&&(o+=e,0!=t&&(o+=" * "+n(exports.ID_T,t)),0!=r&&(o+=" * "+n(exports.ID_ONE_MINUS_T,r))),0==o.length?"0":o}function o(e,t,r){let o="";return e*t!=0&&(o+=e*t,t-1!=0&&(o+=" * "+n(exports.ID_T,t-1)),0!=r&&(o+=" * "+n(exports.ID_ONE_MINUS_T,r))),e*r!=0&&(o+=0==o.length?"":" ",o+="- "+e*r,0!=t&&(o+=" * "+n(exports.ID_T,t)),r-1!=0&&(o+=" * "+n(exports.ID_ONE_MINUS_T,r-1))),0==o.length?"0":o}function s(t,n,r,o){let s="";for(let c=0;c<=t;c++)s+="const m"+r+c+" = "+o(e.bc(t,c),c,t-c)+";\n";s+="\n";for(let e=0;e<n;e++){s+="const c"+r+e+" = ";for(let n=0;n<=t;n++)s+="m"+r+n+" * "+exports.ID_POINTS+"["+n+"]["+e+"]",s+=n<t?" + ":";\n"}return s}exports.ID_T="t",exports.ID_ONE_MINUS_T="oneMinusT",exports.ID_DISTANCE="distance",exports.ID_POINTS="points";const c=new t.Cache;function u(e,t,n){t-=1;const o=c.get([e,t,n]);if(o)return Object.assign({},o);const u=s(t,n,"b",r);let p="";for(let r=0;r<n;r++)p+="    cb"+r,p+=r<n-1?",\n":"\n";const I='"use strict";\n\nconst '+exports.ID_ONE_MINUS_T+" = 1 - "+exports.ID_T+";\n"+u+"\nreturn [\n"+p+"];",_=new Function(exports.ID_POINTS,exports.ID_T,I);return c.set([e,t,n],{body:I,func:_}),{body:I,func:_}}exports.assembleBezierFunction=u;const p=new t.Cache;function I(e,t,n){e-=1;const c=p.get([e,t,n]);if(c)return Object.assign({},c);const u=s(e,t,"b",r),I=s(e,t,"d",o);let _="";for(let r=0;r<t;r++)_+="cd"+r+" * cd"+r,r<t-1&&(_+=" + ");_="const scale = "+exports.ID_DISTANCE+" / Math.sqrt("+_+");\n";let i="";for(let r=0;r<t;r++)i+="const cdn"+r+" = cd"+r+" * scale;\n";let x="";for(let r=0;r<t;r++){x+="    cb"+r;const e=n[r];for(let n=0;n<t;n++){const t=e[n];0!=t&&(x+=" + "+t+" * cdn"+n)}x+=r<t-1?",\n":"\n"}const f='"use strict";\n\nconst '+exports.ID_ONE_MINUS_T+" = 1 - "+exports.ID_T+";\n\n"+u+"\n"+I+"\n"+_+"\n"+i+"\nreturn [\n"+x+"];",D=new Function(exports.ID_POINTS,exports.ID_T,exports.ID_DISTANCE,f);return p.set([e,t,n],{body:f,func:D}),{body:f,func:D}}function _(e,t){return u(r,e,t)}function i(e,t){return u(o,e,t)}function x(e,t,n){return I(e,t,n)}exports.produceGenericAt=_,exports.produceGenericDerived=i,exports.produceGenericOffsetAt=x;
},{"./math-functions":"GSY4","./cache":"hx9J"}],"h8lv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPlaces=void 0;const e=require("./produce-generic"),t=new Map,n=new RegExp(e.ID_POINTS+"\\[(\\d+)\\]\\[(\\d+)\\]","g");function s(e){const s=t.get(e);if(s)return s;const o=[];let r;for(;null!=(r=n.exec(e));)o.push({length:r[0].length,point:parseInt(r[1]),dimension:parseInt(r[2]),start:r.index});const i=[];let l=0;for(const t of o)0!=t.start&&(i[i.length]=e.slice(l,t.start)),l=t.start+t.length,i[i.length]={point:t.point,dimension:t.dimension};const c=e.length;return l!=c&&(i[i.length]=e.slice(l,c)),t.set(e,i),i}exports.getPlaces=s;
},{"./produce-generic":"bHmz"}],"1z8W":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.produceSpecificOffsetAtFunction=exports.produceSpecificDerivedFunction=exports.produceSpecificAtFunction=void 0;const e=require("./produce-generic"),t=require("./find-points-places");function n(e,n){const c=t.getPlaces(e);let o="";for(let t=0;t<c.length;t++)if(t%2==0)o+=c[t];else{const e=c[t];o+=""+n[e.point][e.dimension]}return o}function c(t){const c=t.length,o=t[0].length,i=n(e.produceGenericAt(c,o).body,t);return Function(e.ID_T,i)}function o(t){const c=t.length,o=t[0].length,i=n(e.produceGenericDerived(c,o).body,t);return Function(e.ID_T,i)}function i(t,c){const o=t.length,i=t[0].length,r=n(e.produceGenericOffsetAt(o,i,c).body,t);return Function(e.ID_T,e.ID_DISTANCE,r)}exports.produceSpecificAtFunction=c,exports.produceSpecificDerivedFunction=o,exports.produceSpecificOffsetAtFunction=i;
},{"./produce-generic":"bHmz","./find-points-places":"h8lv"}],"VbkR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class t{constructor(t,e){this.re=t||0,this.im=e||0}}t.multiply=function(e,r){return new t(e.re*r.re-e.im*r.im,e.re*r.im+r.re*e.im)},t.add=function(e,r){return new t(e.re+r.re,e.im+r.im)},t.divideNCompl=function(e,r){const n=e/(r.re*r.re+r.im*r.im);return new t(r.re*n,-r.im*n)},t.root=function(e,r){const n=e.re,i=e.im,o=Math.sqrt(n*n+i*i),s=Math.acos(n/o),c=new Array(r),a=Math.pow(o,1/r),u=i<0?-a:a;for(let m=0;m<r;m++){const e=(2*m*Math.PI+s)/r;c[m]=new t(a*Math.cos(e),u*Math.sin(e))}return c},t.cubicRoot=function(e){const r=e.re,n=e.im,i=Math.sqrt(r*r+n*n),o=Math.pow(i,1/3),s=n<0?-o:o,c=Math.acos(r/i)/3;return new t(o*Math.cos(c),s*Math.sin(c))},exports.default=t;
},{}],"vli6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("./complex.js");function e(t,e){return 0==t?0!=e?[]:[0]:[-e/t]}function n(n,r,u){if(0==n)return e(r,u);const o=r/n,s=o/2*o/2-u/n;if(s<0){const e=Math.sqrt(-s);return[new t.default(-o/2,e),new t.default(-o/2,-e)]}{const t=Math.sqrt(s);return[-o/2+t,-o/2-t]}}exports.solveLinearEquation=e,exports.solveQuadraticEquation=n;const r=new t.default(-.5,.5*Math.sqrt(3)),u=new t.default(-.5,-.5*Math.sqrt(3));function o(e,n){const r=n*n-4*e*e*e;if(r<0){const e=Math.sqrt(-r)/2,u=n/2;return t.default.cubicRoot(new t.default(u,e))}return new t.default(Math.cbrt((n+Math.sqrt(r))/2),0)}function s(e,n,r,u){const o=t.default.divideNCompl(e,n);return new t.default(-(o.re+n.re+u)/(3*r),-(o.im+n.im)/(3*r))}function i(e,i,a,c){if(0==e)return n(i,a,c);if(0==c){const t=n(e,i,a),r=[0],u=t.length;return u>0&&(r[1]=t[0],u>1&&(r[2]=t[1])),r}const l=i*i-3*e*a,f=o(l,2*i*i*i-9*e*i*a+27*e*e*c),d=t.default.multiply(f,r),q=t.default.multiply(f,u);return[s(l,f,e,i),s(l,d,e,i),s(l,q,e,i)]}exports.solveCubicEquation=i;
},{"./complex.js":"VbkR"}],"Nnl4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDeterministicTSearch=void 0;const e=require("linear-quadratic-cubic-eq-solver"),t=(e,t,r)=>{const n=t+r;if(e>n)return e-n;const o=t-r;return e<o?e-o:0},r=e=>{const r=[];for(const n of e)"number"==typeof n?r.push(n):0==t(n.im,0,1e-8)&&r.push(n.re);return r},n=[(t,n)=>{const o=t[1]-t[0],s=t[0]-n;return r(e.solveLinearEquation(o,s))},(t,n)=>{const o=t[0]-2*t[1]+t[2],s=-2*t[0]+2*t[1],u=t[0]-n;return r(e.solveQuadraticEquation(o,s,u))},(t,n)=>{const o=-t[0]+3*t[1]-3*t[2]+t[3],s=3*t[0]-6*t[1]+3*t[2],u=-3*t[0]+3*t[1],c=t[0]-n;return r(e.solveCubicEquation(o,s,u,c))}];function o(e){const t=e.length,r=e[0].length;if(null==t||t<2||t>4)return null;const o=[];for(let n=0;n<r;n++){const t=[];for(let r=0;r<e.length;r++)t.push(e[r][n]);o.push(t)}const s=n[t-2];return(e,t)=>s(o[t],e)}exports.createDeterministicTSearch=o;
},{"linear-quadratic-cubic-eq-solver":"vli6"}],"zkRf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StaticBezier=void 0;const t=require("./produce-specific"),i=require("./deterministic-t-search"),e=i=>{const e=t.produceSpecificAtFunction(i);if(null==e)throw new Error("could not create specific function for points "+JSON.stringify(i));return e},n=t=>{const e=i.createDeterministicTSearch(t);if(null==e)throw new Error("could not create deterministic function for points "+JSON.stringify(t));return e},r=i=>{const e=t.produceSpecificDerivedFunction(i);if(null==e)throw new Error("could not create derived function for points "+JSON.stringify(i));return e},o=[[0,-1],[1,0]],s=[[0,1],[-1,0]],c=(i,e)=>{const n=t.produceSpecificOffsetAtFunction(i,e);if(null==n)throw new Error("could not create offset function for points "+JSON.stringify(i));return n};class h{constructor(t){this.points=t}at(t){return this.at=e(this.points),this.at(t)}direction(t){return this.direction=r(this.points),this.direction(t)}tSearch(t,i){return this.points.length>4?this.tSearch=(()=>{throw new Error("can not t search with a grade greater than 4")}):this.tSearch=n(this.points),this.tSearch(t,i)}offsetPointLeft(t,i){return 2==this.points[0].length?this.offsetPointLeft=c(this.points,o):this.offsetPointLeft=(()=>{throw new Error("can not get the offset point in a "+this.points[0].length+"-dimensional Bezier, only 2-dimensional are permitted")}),this.offsetPointLeft(t,i)}offsetPointRight(t,i){return 2==this.points[0].length?this.offsetPointRight=c(this.points,s):this.offsetPointRight=(()=>{throw new Error("can not get the offset point in a "+this.points[0].length+"-dimensional Bezier, only 2-dimensional are permitted")}),this.offsetPointRight(t,i)}}exports.StaticBezier=h;
},{"./produce-specific":"1z8W","./deterministic-t-search":"Nnl4"}],"LtAd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.debug=void 0;const t=require("event-emitter-typesafe"),e=require("./fit-system"),o=require("nd-bezier"),n=900,i=1400,s=100;function r(t,e){const o=1-e,n=-3*o*o,i=9*e*e-12*e+3,s=6*e-9*e*e,r=3*e*e;return[n*t[0][0]+i*t[1][0]+s*t[2][0]+r*t[3][0],n*t[0][1]+i*t[1][1]+s*t[2][1]+r*t[3][1]]}const a=20;function l(t,e,o=a){t.beginPath();for(let n=0;n<e.length;n++){const i=e[n];t.moveTo(i[0],i[1]),t.arc(i[0],i[1],o,0,360)}t.fill(),t.closePath()}function d(t,e){if(0==e.length)return;t.beginPath();const o=e[0];t.moveTo(o[0],o[1]);for(let n=1;n<e.length;n++){const o=e[n];t.lineTo(o[0],o[1])}t.stroke(),t.closePath()}function c(t,e,n){const i=new o.StaticBezier(t),s=i.offsetPointLeft(e,n),r=i.offsetPointRight(e,n);return[s,i.at(e),r]}function u(t,e,o,n,i){if(0==o||e.length<2)return;const s=[],r=[];for(let l=0;l<=o;l++){const t=l/o,[i,a,d]=c(e,t,n);s.push([a,d]),r.push([a,i])}const a=t.strokeStyle;if(t.strokeStyle="#444",d(t,s.map(t=>t[1])),t.strokeStyle="#444",d(t,r.map(t=>t[1])),i){const e=t.lineWidth;t.strokeStyle="#0ff",t.lineWidth=e/2,t.beginPath();for(const o of[r,s])for(const[e,n]of o)t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]);t.stroke(),t.closePath(),t.lineWidth=e}t.strokeStyle=a}function p(t,e,n,i=n){if(t.length<2)return;const s=new o.StaticBezier(t),r=[];for(let o=0;o<=n;o++)r.push(s.at(o/n));d(e,r)}const f={approachDistance:["1. Approach: Normal-Vector",!0],approachControlPoints:["2. Approach: Shift control points",!1],spikes:["Spikes for offset BeziÃ©r",!1],attachedCoords:["Write coordinates attached to node",!1]};function m(t){return f[t][1]}const h=new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2,useGrouping:!1}).format,g=t=>h(t).padStart(7," "),y=t=>"["+t.map(g).join(", ")+"]";let v,k;function P(t,e,o="black",n="black",i=a){if(!v||!k)return;const s=y(t);v.innerText+=e+": "+s+"\n";const r=k.fillStyle;k.fillStyle=o,l(k,[t]),k.fillStyle=n,k.textAlign="left",k.textBaseline="bottom";const d=m("attachedCoords")?e+" "+s:e;k.fillText(d,t[0]+i,t[1]-i),k.fillStyle=r}function S(){const o=document.getElementById("debug-output"),s=document.getElementById("canvas"),r=document.getElementById("control");v=o,s.setAttribute("height",n+""),s.setAttribute("width",i+"");for(const t of Object.keys(f)){const[e,o]=f[t],n=document.createElement("input"),i="option-"+t;n.id=i,n.type="checkbox",n.checked=o;const s=document.createElement("label");s.innerText=e,s.htmlFor=i;const a=document.createElement("div");a.className="option-wrapper",a.append(n,s),r.append(a),n.addEventListener("change",()=>f[t][1]=n.checked)}const l=(()=>{let t=void 0;const e=()=>{requestAnimationFrame(e),t=void 0};return e(),function(){return t||(t=s.getBoundingClientRect())}})();function c(t){const e=l();return[t.clientX-e.left,t.clientY-e.top]}const h=s.getContext("2d");if(!h)throw new Error("Could not initialize");k=h,h.lineWidth=4,h.strokeStyle="#000";const g=()=>new Promise(t=>requestAnimationFrame(t)),y=new t.EventEmitter;document.addEventListener("mousemove",t=>y.emit("mousemove",{type:"mousemove",original:t,position:c(t)})),document.addEventListener("mousedown",t=>y.emit("mousedown",{type:"mousedown",original:t,position:c(t)})),document.addEventListener("mouseup",t=>y.emit("mouseup",{type:"mouseup",original:t,position:c(t)}));let S=void 0,b=!1;y.addEventListener("mousedown",t=>{S=t.position,b=!1}),y.addEventListener("mouseup",t=>{S=void 0,b?y.emit("dragend",{type:"dragend",original:t.original,position:t.position}):y.emit("click",{type:"click",original:t.original,position:t.position})});let E=void 0;y.addEventListener("mousemove",t=>{if(E=t.position,t.original.buttons>0&&S){const e=S;S=t.position,b?y.emit("drag",{type:"drag",original:t.original,position:t.position,previous:e}):(b=!0,y.emit("dragstart",{type:"dragstart",original:t.original,position:t.position}))}});let L=[];y.addEventListener("click",t=>L.push(t)),y.addEventListener("dragstart",t=>L.push(t)),y.addEventListener("drag",t=>L.push(t)),y.addEventListener("dragend",t=>L.push(t)),y.addEventListener("mousedown",t=>L.push(t)),y.addEventListener("mouseup",t=>L.push(t)),y.addEventListener("mousemove",t=>L.push(t));const w=(n-700)/2,x=(i-900)/2,C=n-w,A=i-x;let D,T=[[x+50,w+100],[A-50,w+100],[A-50,C-100],[x+50,C-100]];function B(t,e,o){for(let n=0;n<t.length;n++){const i=t[n],s=i[0]-e[0],r=i[1]-e[1];if(s*s+r*r<=o*o)return n}}function W(t){return String.fromCharCode("a".charCodeAt(0)+t)}h.font="15px Verdana";const F=Date.now();(async()=>{for(;;){const t=Date.now()-F;Math.sin(t/1e4*Math.PI);h.clearRect(0,0,i,n),v.innerText="";const o=[];let r=void 0;for(const e of L)"dragstart"==e.type?r={start:!0,progressed:!1,ended:!1,startPosition:e.position,endPosition:e.position}:"drag"==e.type?r?(r.progressed=!0,r.endPosition=e.position):r={start:!1,progressed:!0,ended:!1,startPosition:e.previous,endPosition:e.position}:"dragend"==e.type&&(r?(r.ended=!0,r.endPosition=e.position,o.push(r),r=void 0):o.push({start:!1,progressed:!1,ended:!0,startPosition:e.position,endPosition:e.position}));r&&o.push(r);for(const e of o)if(null==D&&(D=B(T,e.startPosition,a)),null!=D){const t=e.endPosition[0]-e.startPosition[0],o=e.endPosition[1]-e.startPosition[1],n=T[D];n[0]+=t,n[1]+=o,e.ended&&(D=void 0)}null!=D?s.style.cursor="grabbing":E&&(null!=B(T,E,a)?s.style.cursor="grab":s.style.cursor="default");for(const e of L){const[t,o]=e.position;if("click"==e.type&&t>=0&&t<=i&&o>=0&&o<=n){const t=B(T,e.position,a);null!=t?T.splice(t,1):T.push(e.position)}}L=[];const l=40;if(T.length>1){if(h.fillStyle="black",h.lineWidth=4,h.strokeStyle="#000",p(T,h,l),m("approachDistance")&&u(h,T,l,100,m("spikes")),h.fillStyle="black",h.strokeStyle="#000",m("approachControlPoints"))for(const t of["left","right"]){const o=e.fitSystemNewApproach(T,t,100);h.lineWidth=4,h.strokeStyle="#f0a",p(o,h,l,0),h.setLineDash([8,8]),d(h,o),h.setLineDash([]);for(let e=0;e<o.length;e++)P(o[e],W(e)+"_morphed_"+t)}h.fillStyle="black",h.strokeStyle="#000"}d(h,T);for(let e=0;e<T.length;e++)P(T[e],W(e),D==e?"red":"orange");await g()}})()}exports.debug=P,document.addEventListener("DOMContentLoaded",S);
},{"event-emitter-typesafe":"BaXx","./fit-system":"eZzv","nd-bezier":"zkRf"}]},{},["LtAd"], null)
//# sourceMappingURL=interactive.1d97a26b.js.map