parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"xNzd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bc=exports.factorial=void 0,exports.factorial=function(){const t=[1,1,2,6,24,120,720,5040,40320,362880,3628800,39916800,479001600,6227020800,87178291200,1307674368e3,20922789888e3,355687428096e3,6402373705728e3];return function(e){return t[e]}}(),exports.bc=function(){const t=[];for(let e=0;e<=15;e++){t[e]=[];for(let r=0;r<=Math.ceil(e/2);r++)t[e][r]=exports.factorial(e)/(exports.factorial(r)*exports.factorial(e-r))}return function(e,r){return r>e/2&&(r=e-r),0==r?1:1==r?e:t[e][r]}}();
},{}],"/qC7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.produceGenericAtFunction=void 0;const n=require("./math-functions"),e=[];function t(t,o){if(null!=e[t-=1]){if(null!=e[t][o])return e[t][o]}else e[t]=[];let r="";const c=new Array(o).fill("");for(let e=0;e<=t;e++){const s="m"+e;r+="const "+s+" = "+n.bc(t,e)+" * t".repeat(e)+" * oneMinusT".repeat(t-e)+";\n";for(let n=0;n<o;n++)c[n]+=s+" * points["+e+"]["+n+"]",e<t&&(c[n]+=" + ")}let s="";for(let n=0;n<o;n++)s+="    "+c[n]+(n==o-1?"\n":",\n");const u='"use strict";\n\nconst oneMinusT = 1 - t;\n'+r+"return [\n"+s+"];",i=new Function("points","t",u);return e[t][o]={body:u,func:i}}exports.produceGenericAtFunction=t;
},{"./math-functions":"xNzd"}],"zrmw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.produceSpecificAtFunction=exports.getPlaces=void 0;const t=require("./produce-generic-at"),e=/points\[(\d+)\]\[(\d+)\]/g;function n(t){const n=[];let o;for(;null!=(o=e.exec(t));)n[n.length]={length:o[0].length,point:parseInt(o[1]),dimension:parseInt(o[2]),start:o.index};const i=[];let s=0;for(let e of n)0!=e.start&&(i[i.length]=t.slice(s,e.start)),s=e.start+e.length,i[i.length]={point:e.point,dimension:e.dimension};const c=t.length;return s!=c&&(i[i.length]=t.slice(s,c)),i}function o(e){const o=e.length,i=e[0].length,s=t.produceGenericAtFunction(o,i);let c=s.body;null==s.pointsPositions&&(s.pointsPositions=n(c));const r=s.pointsPositions;let l="";for(let t=0;t<r.length;t++)if(t%2==0)l+=r[t];else{const n=r[t];l+=""+e[n.point][n.dimension]}return Function("t",l)}exports.getPlaces=n,exports.produceSpecificAtFunction=o;
},{"./produce-generic-at":"/qC7"}],"M7my":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class t{constructor(t,e){this.re=t||0,this.im=e||0}}t.multiply=function(e,r){return new t(e.re*r.re-e.im*r.im,e.re*r.im+r.re*e.im)},t.add=function(e,r){return new t(e.re+r.re,e.im+r.im)},t.divideNCompl=function(e,r){const n=e/(r.re*r.re+r.im*r.im);return new t(r.re*n,-r.im*n)},t.root=function(e,r){const n=e.re,i=e.im,o=Math.sqrt(n*n+i*i),s=Math.acos(n/o),c=new Array(r),a=Math.pow(o,1/r),u=i<0?-a:a;for(let m=0;m<r;m++){const e=(2*m*Math.PI+s)/r;c[m]=new t(a*Math.cos(e),u*Math.sin(e))}return c},t.cubicRoot=function(e){const r=e.re,n=e.im,i=Math.sqrt(r*r+n*n),o=Math.pow(i,1/3),s=n<0?-o:o,c=Math.acos(r/i)/3;return new t(o*Math.cos(c),s*Math.sin(c))},exports.default=t;
},{}],"okA4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("./complex.js");function e(t,e){return 0==t?0!=e?[]:[0]:[-e/t]}function n(n,r,u){if(0==n)return e(r,u);const o=r/n,s=o/2*o/2-u/n;if(s<0){const e=Math.sqrt(-s);return[new t.default(-o/2,e),new t.default(-o/2,-e)]}{const t=Math.sqrt(s);return[-o/2+t,-o/2-t]}}exports.solveLinearEquation=e,exports.solveQuadraticEquation=n;const r=new t.default(-.5,.5*Math.sqrt(3)),u=new t.default(-.5,-.5*Math.sqrt(3));function o(e,n){const r=n*n-4*e*e*e;if(r<0){const e=Math.sqrt(-r)/2,u=n/2;return t.default.cubicRoot(new t.default(u,e))}return new t.default(Math.cbrt((n+Math.sqrt(r))/2),0)}function s(e,n,r,u){const o=t.default.divideNCompl(e,n);return new t.default(-(o.re+n.re+u)/(3*r),-(o.im+n.im)/(3*r))}function i(e,i,a,c){if(0==e)return n(i,a,c);if(0==c){const t=n(e,i,a),r=[0],u=t.length;return u>0&&(r[1]=t[0],u>1&&(r[2]=t[1])),r}const l=i*i-3*e*a,f=o(l,2*i*i*i-9*e*i*a+27*e*e*c),d=t.default.multiply(f,r),q=t.default.multiply(f,u);return[s(l,f,e,i),s(l,d,e,i),s(l,q,e,i)]}exports.solveCubicEquation=i;
},{"./complex.js":"M7my"}],"hOQ8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDeterministicTSearch=void 0;const e=require("linear-quadratic-cubic-eq-solver"),t=(e,t,r)=>{const n=t+r;if(e>n)return e-n;const o=t-r;return e<o?e-o:0},r=e=>{const r=[];for(const n of e)"number"==typeof n?r.push(n):0==t(n.im,0,1e-8)&&r.push(n.re);return r},n=[(t,n)=>{const o=t[1]-t[0],s=t[0]-n;return r(e.solveLinearEquation(o,s))},(t,n)=>{const o=t[0]-2*t[1]+t[2],s=-2*t[0]+2*t[1],u=t[0]-n;return r(e.solveQuadraticEquation(o,s,u))},(t,n)=>{const o=-t[0]+3*t[1]-3*t[2]+t[3],s=3*t[0]-6*t[1]+3*t[2],u=-3*t[0]+3*t[1],c=t[0]-n;return r(e.solveCubicEquation(o,s,u,c))}];function o(e){const t=e.length,r=e[0].length;if(null==t||t<2||t>4)return null;const o=[];for(let n=0;n<r;n++){const t=[];for(let r=0;r<e.length;r++)t.push(e[r][n]);o.push(t)}const s=n[t-2];return(e,t)=>s(o[t],e)}exports.createDeterministicTSearch=o;
},{"linear-quadratic-cubic-eq-solver":"okA4"}],"tty8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StaticBezier=void 0;const r=require("./produce-specific-at"),t=require("./deterministic-t-search"),e=t=>{const e=r.produceSpecificAtFunction(t);if(null==e)throw new Error("could not create specific function for points "+JSON.stringify(t));return e},i=r=>{const e=t.createDeterministicTSearch(r);if(null==e)throw new Error("could not create deterministic function for points "+JSON.stringify(r));return e};class c{constructor(r){this.at=e(r),this.tSearch=i(r)}at(r){throw new Error}tSearch(r,t){throw new Error}}exports.StaticBezier=c;
},{"./produce-specific-at":"zrmw","./deterministic-t-search":"hOQ8"}],"15ap":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EventEmitter=void 0;const e=Symbol("LISTENERS"),t=t=>{const r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){const r=Object.create(null);return Object.defineProperty(t,e,{value:r,configurable:!1,enumerable:!1,writable:!1}),r}return r.value},r=(e,r)=>{const o=t(e);return r in o?o[r]:o[r]=[]};class o{addEventListener(e,t){r(this,e).push(t)}on(e,t){}addListener(e,t){}subscribe(e,t){}once(e,t){const r=o=>{this.removeEventListener(e,r),t(o)};this.addEventListener(e,r)}waitFor(e){return new Promise(t=>this.once(e,t))}emit(e,t){const o=r(this,e);for(const r of o.slice())r.call(this,t)}dispatch(e,t){}push(e,t){}publish(e,t){}removeEventListener(e,t){const o=r(this,e),s=o.indexOf(t);return-1!=s&&(o.splice(s,1),!0)}off(e,t){return!1}removeListener(e,t){return!1}unsubscribe(e,t){return!1}}exports.EventEmitter=o,o.prototype.on=o.prototype.addEventListener,o.prototype.addListener=o.prototype.addEventListener,o.prototype.subscribe=o.prototype.addEventListener,o.prototype.dispatch=o.prototype.emit,o.prototype.push=o.prototype.dispatch,o.prototype.publish=o.prototype.dispatch,o.prototype.off=o.prototype.removeEventListener,o.prototype.removeListener=o.prototype.removeEventListener,o.prototype.unsubscribe=o.prototype.removeEventListener;
},{}],"SbX1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});
},{}],"9p2c":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeEventEmitter=void 0;const e=require("./event-emitter"),t=Object.getOwnPropertyDescriptors(e.EventEmitter.prototype);function r(e){const r=e.prototype,o=Object.getOwnPropertyDescriptors(r);for(const n in t)if(n in o)throw new Error(String(n)+" was already present in the prototype of the target");Object.defineProperties(r,t)}delete t.constructor,exports.makeEventEmitter=r;
},{"./event-emitter":"15ap"}],"BaXx":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),t=this&&this.__exportStar||function(t,r){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(r,i)||e(r,t,i)};Object.defineProperty(exports,"__esModule",{value:!0}),t(require("./event-emitter"),exports),t(require("./event-emitter-int"),exports),t(require("./make-event-emitter"),exports);
},{"./event-emitter":"15ap","./event-emitter-int":"SbX1","./make-event-emitter":"9p2c"}],"eZzv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fitSystemNewApproach=exports.fitSystemFixed=exports.fitSystem=void 0;const t=(t,e)=>Math.sqrt((e[0]-t[0])**2+(e[1]-t[1])**2);function e(e,s,n,r,o){const c=t(s,r)/t(e,n),i=[(n[0]-e[0])*c,(n[1]-e[1])*c],p=(r[1]-s[1]+(r[0]-s[0])*i[1]/i[0])*i[0]/(i[0]*i[0]-i[1]*i[1]),u=Math.cos(Math.asin(p));return o.map(([t,s])=>{const n=[t-e[0],s-e[1]],r=[u*c*n[0]-p*c*n[1],p*c*n[0]+u*c*n[1]];return[e[0]+r[0],e[1]+r[1]]})}function s(t,e,s,n,r){const o=t[0],c=t[1],i=s[0],p=s[1],u=e[0],f=e[1],a=n[0],h=n[1],l=(a-u*i/o)*o/(i*-c+p*o),x=(h-f*i/o)*o/(i*-c+p*o),m=(u-l*c)/o,y=(f-x*c)/o;return r.map(([t,e])=>[t*m+e*l,t*y+e*x])}exports.fitSystem=e,exports.fitSystemFixed=s;const n=(t,e=1)=>{const s=Math.sqrt(t[0]*t[0]+t[1]*t[1]);return[e*t[0]/s,e*t[1]/s]},r=t=>[t[1],-t[0]],o=t=>[-t[1],t[0]],c=(t,e)=>[e[0]-t[0],e[1]-t[1]],i=(t,e)=>[t[0]+e[0],t[1]+e[1]],p=(t,e,s=1e-8)=>Math.abs(t-e)<s,u=(t,e)=>{const s=n(t,1),r=n(e,1);return p(s[0],r[0])&&p(s[1],r[1])||p(s[0],-r[0])&&p(s[1],-r[1])},f=(t,e)=>[t[0]*e,t[1]*e],a=(t,e,s,n)=>{if(u(e,n))return"parallel-or-identical";if(0==e[1]){const r=t;t=s,s=r;const o=e;e=n,n=o}const r=t[0],o=t[1],c=t[0]+e[0],i=t[1]+e[1],p=o-i,f=c-r,a=r*i-c*o,h=s[0],l=s[1],x=s[0]+n[0],m=s[1]+n[1],y=l-m,d=(y*a-(h*m-x*l)*p)/(p*(x-h)-y*f);return[(-a-f*d)/p,d]};function h(t,e,s){const p="left"==e?r:o,u="left"==e?o:r,f=[];{const e=c(t[0],t[1]),r=p(n(e,s));f.push(i(t[0],r))}for(let r=1;r<t.length-1;r++){const e=c(t[r-1],t[r]),o=i(t[r-1],n(p(e),s)),h=c(t[r+1],t[r]),l=i(t[r+1],n(u(h),s)),x=a(o,e,l,h);"string"==typeof x?f.push(i(t[r],n(p(e),s))):f.push(x)}{const e=c(t[t.length-2],t[t.length-1]),r=p(n(e,s));f.push(i(t[t.length-1],r))}return f}exports.fitSystemNewApproach=h;
},{}],"LtAd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.debug=void 0;const t=require("../../nd-bezier/src/static-bezier"),e=require("event-emitter-typesafe"),o=require("./fit-system"),n=900,i=1400,s=100;function r(t,e){const o=1-e,n=-3*o*o,i=9*e*e-12*e+3,s=6*e-9*e*e,r=3*e*e;return[n*t[0][0]+i*t[1][0]+s*t[2][0]+r*t[3][0],n*t[0][1]+i*t[1][1]+s*t[2][1]+r*t[3][1]]}const d=20;function a(t,e,o=d){t.beginPath();for(let n=0;n<e.length;n++){const i=e[n];t.moveTo(i[0],i[1]),t.arc(i[0],i[1],o,0,360)}t.fill(),t.closePath()}function l(t,e){if(0==e.length)return;t.beginPath();const o=e[0];t.moveTo(o[0],o[1]);for(let n=1;n<e.length;n++){const o=e[n];t.lineTo(o[0],o[1])}t.stroke(),t.closePath()}function c(e,o,n){const i=r(e,o),s=Math.sqrt(i[0]*i[0]+i[1]*i[1]),d=[n*i[0]/s,n*i[1]/s];const a=new t.StaticBezier(e).at(o);return[[a[0]+d[1],a[1]+-d[0]],[a[0],a[1]],[a[0]+-d[1],a[1]+d[0]]]}function u(t,e,o,n,i){if(0==o||4!=e.length)return;const s=[],r=[];for(let a=0;a<=o;a++){const t=a/o,[i,d,l]=c(e,t,n);s.push([d,l]),r.push([d,i])}const d=t.strokeStyle;if(t.strokeStyle="#444",l(t,s.map(t=>t[1])),t.strokeStyle="#444",l(t,r.map(t=>t[1])),i){const e=t.lineWidth;t.strokeStyle="#0ff",t.lineWidth=e/2,t.beginPath();for(const o of[r,s])for(const[e,n]of o)t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]);t.stroke(),t.closePath(),t.lineWidth=e}t.strokeStyle=d}function p(e,o,n,i=n){if(e.length<2||e.length>4)return;const s=new t.StaticBezier(e),r=[];for(let t=0;t<=n;t++)r.push(s.at(t/n));l(o,r)}const m={spikes:["Spikes for offset Beziér",!1],attachedCoords:["Write coordinates attached to node",!1]};function f(t){return m[t][1]}const g=new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2,useGrouping:!1}).format,h=t=>g(t).padStart(7," "),y=t=>"["+t.map(h).join(", ")+"]";let v,k;function b(t,e,o="black",n="black",i=d){if(!v||!k)return;const s=y(t);v.innerText+=e+": "+s+"\n";const r=k.fillStyle;k.fillStyle=o,a(k,[t]),k.fillStyle=n,k.textAlign="left",k.textBaseline="bottom";const l=f("attachedCoords")?e+" "+s:e;k.fillText(l,t[0]+i,t[1]-i),k.fillStyle=r}function E(){const t=document.getElementById("debug-output"),s=document.getElementById("canvas"),r=document.getElementById("control");v=t,s.setAttribute("height",n+""),s.setAttribute("width",i+"");for(const e of Object.keys(m)){const[t,o]=m[e],n=document.createElement("input"),i="option-"+e;n.id=i,n.type="checkbox",n.checked=o;const s=document.createElement("label");s.innerText=t,s.htmlFor=i;const d=document.createElement("div");d.className="option-wrapper",d.append(n,s),r.append(d),n.addEventListener("change",()=>m[e][1]=n.checked)}const a=(()=>{let t=void 0;const e=()=>{requestAnimationFrame(e),t=void 0};return e(),function(){return t||(t=s.getBoundingClientRect())}})();function c(t){const e=a();return[t.clientX-e.left,t.clientY-e.top]}const g=s.getContext("2d");if(!g)throw new Error("Could not initialize");k=g,g.lineWidth=4,g.strokeStyle="#000";const h=()=>new Promise(t=>requestAnimationFrame(t)),y=new e.EventEmitter;document.addEventListener("mousemove",t=>y.emit("mousemove",{type:"mousemove",original:t,position:c(t)})),document.addEventListener("mousedown",t=>y.emit("mousedown",{type:"mousedown",original:t,position:c(t)})),document.addEventListener("mouseup",t=>y.emit("mouseup",{type:"mouseup",original:t,position:c(t)}));let E=void 0,S=!1;y.addEventListener("mousedown",t=>{E=t.position,S=!1}),y.addEventListener("mouseup",t=>{E=void 0,S?y.emit("dragend",{type:"dragend",original:t.original,position:t.position}):y.emit("click",{type:"click",original:t.original,position:t.position})});let P=void 0;y.addEventListener("mousemove",t=>{if(P=t.position,t.original.buttons>0&&E){const e=E;E=t.position,S?y.emit("drag",{type:"drag",original:t.original,position:t.position,previous:e}):(S=!0,y.emit("dragstart",{type:"dragstart",original:t.original,position:t.position}))}});let w=[];y.addEventListener("click",t=>w.push(t)),y.addEventListener("dragstart",t=>w.push(t)),y.addEventListener("drag",t=>w.push(t)),y.addEventListener("dragend",t=>w.push(t)),y.addEventListener("mousedown",t=>w.push(t)),y.addEventListener("mouseup",t=>w.push(t)),y.addEventListener("mousemove",t=>w.push(t));const L=(n-700)/2,x=(i-900)/2,C=n-L,T=i-x;let B,A=[[x+50,L+100],[T-50,L+100],[T-50,C-100],[x+50,C-100]];function D(t,e,o){for(let n=0;n<t.length;n++){const i=t[n],s=i[0]-e[0],r=i[1]-e[1];if(s*s+r*r<=o*o)return n}}function W(t){return String.fromCharCode("a".charCodeAt(0)+t)}g.font="15px Verdana";const q=Date.now();(async()=>{for(;;){const t=Date.now()-q;Math.sin(t/1e4*Math.PI);g.clearRect(0,0,i,n),v.innerText="";const e=[];let r=void 0;for(const o of w)"dragstart"==o.type?r={start:!0,progressed:!1,ended:!1,startPosition:o.position,endPosition:o.position}:"drag"==o.type?r?(r.progressed=!0,r.endPosition=o.position):r={start:!1,progressed:!0,ended:!1,startPosition:o.previous,endPosition:o.position}:"dragend"==o.type&&(r?(r.ended=!0,r.endPosition=o.position,e.push(r),r=void 0):e.push({start:!1,progressed:!1,ended:!0,startPosition:o.position,endPosition:o.position}));r&&e.push(r);for(const o of e)if(null==B&&(B=D(A,o.startPosition,d)),null!=B){const t=o.endPosition[0]-o.startPosition[0],e=o.endPosition[1]-o.startPosition[1],n=A[B];n[0]+=t,n[1]+=e,o.ended&&(B=void 0)}null!=B?s.style.cursor="grabbing":P&&(null!=D(A,P,d)?s.style.cursor="grab":s.style.cursor="default");for(const o of w)o.type;w=[];const a=40;if(4==A.length){g.fillStyle="black",g.lineWidth=4,g.strokeStyle="#000",p(A,g,a),u(g,A,a,100,f("spikes")),g.fillStyle="black",g.strokeStyle="#000";for(const t of["left","right"]){const e=o.fitSystemNewApproach(A,t,100);g.lineWidth=4,g.strokeStyle="#f0a",p(e,g,a,0),g.setLineDash([8,8]),l(g,e),g.setLineDash([]);for(let o=0;o<e.length;o++)b(e[o],W(o)+"_morphed_"+t)}g.fillStyle="black",g.strokeStyle="#000",l(g,A);for(let t=0;t<A.length;t++)b(A[t],W(t),B==t?"red":"orange")}await h()}})()}exports.debug=b,document.addEventListener("DOMContentLoaded",E);
},{"../../nd-bezier/src/static-bezier":"tty8","event-emitter-typesafe":"BaXx","./fit-system":"eZzv"}]},{},["LtAd"], null)
//# sourceMappingURL=interactive.e710c6d7.js.map